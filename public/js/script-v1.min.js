const DARK_MODE_CLASS_NAME="dark",LIGHT_MODE_CLASS_NAME="light",themeBtn=document.getElementById("theme-btn"),parent=document.getElementById("parent"),logoDiv=document.getElementById("logo-div"),inputDiv=document.getElementById("input-div"),resultLink=document.getElementById("result-link"),resultDiv=document.getElementById("result-div"),copyTooltip=document.getElementById("copy-tooltip"),urlInput=document.getElementById("url-input"),getSurlBtn=document.getElementById("surl-btn"),errorBlock=document.getElementById("error-block"),BASE_URL=window.location.origin;let currThemeClassName=window.localStorage.getItem("THEME")||LIGHT_MODE_CLASS_NAME;function nill(){}function navigateToHome(){window.location.href="/"}function changeTheme(){currThemeClassName===DARK_MODE_CLASS_NAME?(currThemeClassName=LIGHT_MODE_CLASS_NAME,parent.className=currThemeClassName,themeBtn.innerText="Light Mode"):(currThemeClassName=DARK_MODE_CLASS_NAME,parent.className=currThemeClassName,themeBtn.innerText="Dark Mode"),window.localStorage.setItem("THEME",currThemeClassName)}async function copyToClipboard(){try{await navigator.clipboard.writeText(resultLink.innerText);const e=copyTooltip.innerText;copyTooltip.innerText="Copied",setTimeout(()=>{copyTooltip.innerText=e},3e3)}catch(e){showError("Oops! Something went wrong")}}function getSurl(){hideResultDiv(),hideError();let e=urlInput.value;return e?isValidURL(e)?("/"===e[e.length-1]&&(e=e.slice(0,e.length-1)),void fetch(BASE_URL+"/api/url/short?url="+e).then(e=>e.json()).then(e=>{e.success?(hideInputDiv(),showSurl(e.url)):showError(e.error)}).catch(e=>{showError("Oops! Something went wrong")})):showError("URL is not valid"):showError("URL is required")}function isValidURL(e=""){if(e.length>2048)return!1;return/^(?:(?:https?):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)}function showSurl(e){resultLink.innerText=e,resultDiv.style.display="flex"}function hideResultDiv(){resultDiv.style.display="none",resultLink.innerText=""}function hideInputDiv(){inputDiv.style.display="none",urlInput.value=""}function showError(e=""){errorBlock.style.display="block",errorBlock.innerText=e,setTimeout(()=>{errorBlock.style.display="none"},5e3)}function hideError(){errorBlock.style.display="none",errorBlock.innerText=""}parent.className=currThemeClassName,themeBtn.innerText=currThemeClassName===LIGHT_MODE_CLASS_NAME?"Light Mode":"Dark Mode",logoDiv?logoDiv.onclick=navigateToHome:nill(),themeBtn?themeBtn.onclick=changeTheme:nill(),resultDiv?resultDiv.onclick=copyToClipboard:nill(),getSurlBtn?getSurlBtn.onclick=getSurl:nill();