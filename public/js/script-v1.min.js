const DARK_MODE_CLASS_NAME="dark",LIGHT_MODE_CLASS_NAME="light",themeBtn=document.getElementById("theme-btn"),parent=document.getElementById("parent"),logoDiv=document.getElementById("logo-div"),inputDiv=document.getElementById("input-div"),resultLink=document.getElementById("result-link"),resultDiv=document.getElementById("result-div"),copyTooltip=document.getElementById("copy-tooltip"),urlInput=document.getElementById("url-input"),getSurlBtn=document.getElementById("surl-btn"),errorBlock=document.getElementById("error-block"),BASE_URL=window.location.origin;let currThemeClassName=window.localStorage.getItem("THEME")||LIGHT_MODE_CLASS_NAME;function navigateToHome(){window.location.href="/"}function changeTheme(){currThemeClassName===DARK_MODE_CLASS_NAME?(currThemeClassName=LIGHT_MODE_CLASS_NAME,parent.className=currThemeClassName,themeBtn.innerText="Light Mode"):(currThemeClassName=DARK_MODE_CLASS_NAME,parent.className=currThemeClassName,themeBtn.innerText="Dark Mode"),window.localStorage.setItem("THEME",currThemeClassName)}function copyToClipboard(){let e=window.getSelection(),t=document.createRange();t.selectNodeContents(resultLink),e.removeAllRanges(),e.addRange(t),document.execCommand("Copy"),e.removeAllRanges();const n=copyTooltip.innerText;copyTooltip.innerText="Copied",setTimeout(()=>{copyTooltip.innerText=n},3e3)}function getSurl(){hideResultDiv(),hideError();let e=urlInput.value;return e?isValidURL(e)?("/"===e[e.length-1]&&(e=e.slice(0,e.length-1)),void fetch(BASE_URL+"/api/url/short?url="+e).then(e=>e.json()).then(e=>{e.success?(hideInputDiv(),showSurl(e.url)):showError(e.error)}).catch(e=>{console.log(e),showError("Oops! Something went wrong")})):showError("URL is not valid"):showError("URL is required")}function isValidURL(e=""){var t=new RegExp(/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi);return e.match(t)}function showSurl(e){resultLink.innerText=e,resultDiv.style.display="flex"}function hideResultDiv(){resultDiv.style.display="none",resultLink.innerText=""}function hideInputDiv(){inputDiv.style.display="none",urlInput.value=""}function showError(e=""){errorBlock.style.display="block",errorBlock.innerText=e,setTimeout(()=>{errorBlock.style.display="none"},5e3)}function hideError(){errorBlock.style.display="none",errorBlock.innerText=""}parent.className=currThemeClassName,themeBtn.innerText=currThemeClassName===LIGHT_MODE_CLASS_NAME?"Light Mode":"Dark Mode",logoDiv.onclick=navigateToHome,themeBtn.onclick=changeTheme,resultDiv.onclick=copyToClipboard,getSurlBtn.onclick=getSurl;